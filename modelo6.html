<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- ==== PREVIEW para WhatsApp / redes (Open Graph) ==== -->
  <link rel="canonical" href="https://lauraac.github.io/invitaciondigital/" />

  <meta property="og:url" content="https://lauraac.github.io/invitaciondigital/">
  <meta property="og:title" content="Invitación • Cumple K-Pop de Iliana">
  <meta property="og:description" content="8 de noviembre • 14:00 hrs • ¡Te espero! ✨">
  <meta property="og:image" content="https://lauraac.github.io/invitaciondigital/img/og-iliana-2025a.jpg">
  <meta property="og:image:secure_url" content="https://lauraac.github.io/invitaciondigital/img/og-iliana-2025a.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <title>Invitación • Cumple K-Pop de Iliana</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Fredoka:wght@400;600;700&display=swap"
    rel="stylesheet" />
  <style>
    :root {
      --k1: #ff4fd3;
      --k2: #7b61ff;
      --k3: #40e9ff;
      --ink: #222;
      --card: rgba(255, 255, 255, 0.86);
      --bg-image: url("./img/6.png");
    }

    html,
    body {
      height: 100%;
    }

    body {
      position: relative;
      font-family: Poppins, system-ui, -apple-system, Segoe UI, Roboto,
        "Helvetica Neue", Arial, "Noto Sans";
      color: var(--ink);
      overflow-x: hidden;
      background: #0b0b13;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: var(--bg-image) center/cover no-repeat;
      filter: saturate(1.05) brightness(0.85);
      z-index: -3;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      z-index: -2;
      background: radial-gradient(1200px 600px at 10% 0%,
          rgba(27, 22, 48, 0.85) 0%,
          rgba(15, 15, 27, 0.85) 40%,
          rgba(9, 10, 16, 0.9) 100%),
        linear-gradient(135deg,
          rgba(255, 79, 211, 0.25),
          rgba(64, 233, 255, 0.25));
      mix-blend-mode: overlay;
    }

    /* 🔄 Efecto flip para la foto circular */
    .flip-frame {
      width: 220px;
      height: 220px;
      margin: 0 auto 8px auto;
      perspective: 1000px;
    }

    .flip-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.8s;
      transform-style: preserve-3d;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 14px 40px rgba(123, 97, 255, 0.45);
    }

    .flip-frame:hover .flip-inner,
    .flip-frame:active .flip-inner {
      transform: rotateY(180deg);
    }

    .flip-front,
    .flip-back {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      backface-visibility: hidden;
      overflow: hidden;
    }

    .flip-front img,
    .flip-back img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .flip-back {
      transform: rotateY(180deg);
    }

    .hero {
      position: relative;
      padding: 40px 18px 28px;
      text-align: center;
      color: #fff;
      background: linear-gradient(135deg,
          rgba(255, 79, 211, 0.95),
          rgba(123, 97, 255, 0.95) 45%,
          rgba(64, 233, 255, 0.95));
      border-bottom-left-radius: 28px;
      border-bottom-right-radius: 28px;
      box-shadow: 0 8px 40px rgba(123, 97, 255, 0.35);
      overflow: hidden;
    }

    .hero::after {
      content: "";
      position: absolute;
      inset: 0;
      pointer-events: none;
      background-image: radial-gradient(rgba(255, 255, 255, 0.25) 1px,
          transparent 1px);
      background-size: 4px 4px;
      opacity: 0.18;
      mix-blend-mode: screen;
    }

    .k-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-weight: 700;
      letter-spacing: 0.06em;
      background: rgba(255, 255, 255, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.45);
      padding: 0.35rem 0.75rem;
      border-radius: 999px;
      backdrop-filter: blur(4px);
    }

    .title {
      font-family: Fredoka, Poppins, sans-serif;
      font-weight: 800;
      line-height: 0.95;
      margin: 12px 0 2px;
      font-size: clamp(32px, 6vw, 58px);
      text-shadow: 0 6px 22px rgba(0, 0, 0, 0.35);
    }

    /* 💖 Colores personalizados para títulos de secciones */
    h2.h4.fw-bold {
      background: linear-gradient(135deg, #ff4fd3, #7b61ff, #40e9ff);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 4px 12px rgba(123, 97, 255, 0.3);
    }

    .subtitle {
      font-weight: 600;
      font-size: clamp(16px, 2.6vw, 22px);
    }

    .glass {
      background: var(--card);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.55);
      border-radius: 18px;
      box-shadow: 0 8px 28px rgba(0, 0, 0, 0.25);
    }

    .info-card {
      max-width: 900px;
    }

    .pill {
      border-radius: 999px;
      padding: 0.35rem 0.75rem;
      background: #fff;
      display: inline-block;
      font-weight: 600;
    }

    .big-age {
      font-family: Fredoka;
      font-size: clamp(42px, 10vw, 92px);
      font-weight: 800;
      line-height: 1;
      background: linear-gradient(135deg, var(--k3), #fff, var(--k1));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 6px 18px rgba(255, 255, 255, 0.25);
    }

    .icon {
      font-size: 1.2rem;
      width: 1.6rem;
      text-align: center;
      color: var(--k2);
    }

    .btn-k {
      background: linear-gradient(135deg, var(--k1), var(--k2));
      border: none;
      color: #fff;
      font-weight: 700;
    }

    .btn-k:hover {
      filter: brightness(1.05);
    }

    .cover .frame {
      width: 220px;
      height: 220px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%,
          rgba(255, 255, 255, 0.25),
          transparent 60%),
        linear-gradient(135deg, var(--k1), var(--k2));
      padding: 6px;
      box-shadow: 0 14px 40px rgba(123, 97, 255, 0.45);
      margin: 0 auto 8px auto;
    }

    .cover img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
      background: #fff;
    }

    /* 🎯 Countdown con los colores de la paleta */
    #countdown .pill {
      background: linear-gradient(135deg,
          rgba(255, 255, 255, 0.98),
          rgba(255, 255, 255, 0.9));
      border: 1px solid rgba(255, 255, 255, 0.7);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08),
        0 0 0 3px rgba(255, 79, 211, 0.08);
    }

    #countdown .h2 {
      background: linear-gradient(135deg,
          var(--k1),
          var(--k2) 55%,
          var(--k3));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 8px 22px rgba(123, 97, 255, 0.25);
    }

    #countdown .label-chip {
      display: inline-block;
      margin-top: 0.25rem;
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      background: linear-gradient(135deg,
          rgba(255, 79, 211, 0.12),
          rgba(64, 233, 255, 0.12));
      border: 1px solid rgba(255, 255, 255, 0.6);
      font-weight: 600;
    }

    /* Confetti + globitos (igual que antes) */
    .confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 2;
    }

    .spark {
      position: absolute;
      width: 10px;
      height: 14px;
      border-radius: 2px;
      animation: fall 4.2s linear infinite;
      opacity: 0.85;
    }

    /* 💖 Centrar y agrandar el número + fecha + hora */
    .age-block {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .age-block .big-age {
      font-size: clamp(80px,
          15vw,
          160px);
      /* más grande en pantallas grandes */
      line-height: 1;
      margin-bottom: 0.6rem;
      background: linear-gradient(135deg,
          var(--k1),
          var(--k2) 40%,
          var(--k3));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 10px 30px rgba(255, 255, 255, 0.25);
    }

    .age-block .pill {
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      padding: 0.45rem 1.2rem;
      background: linear-gradient(135deg,
          rgba(255, 255, 255, 0.95),
          rgba(255, 255, 255, 0.85));
      border: 1px solid rgba(255, 255, 255, 0.7);
      border-radius: 999px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* Imagen grande en lugar del número */
    .age-photo {
      width: clamp(140px, 28vw, 220px);
      aspect-ratio: 1/1;
      border-radius: 50%;
      margin: 0 auto 0.8rem auto;
      position: relative;
      padding: 6px;
      /* aro */
      background: linear-gradient(135deg,
          var(--k1),
          var(--k2) 45%,
          var(--k3));
      box-shadow: 0 14px 40px rgba(123, 97, 255, 0.35);
    }

    .age-photo::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%,
          rgba(255, 255, 255, 0.25),
          transparent 60%);
      pointer-events: none;
    }

    .age-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 50%;
      background: #fff;
    }

    /* Ajustes de las pills debajo */
    .age-block {
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .age-block .pill {
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
      font-weight: 600;
      padding: 0.45rem 1.2rem;
      background: linear-gradient(135deg,
          rgba(255, 255, 255, 0.95),
          rgba(255, 255, 255, 0.85));
      border: 1px solid rgba(255, 255, 255, 0.7);
      border-radius: 999px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* ↓↓↓ pega justo debajo de .flip-back { transform: rotateY(180deg); } */
    .flip-inner.is-flipped {
      transform: rotateY(180deg);
    }

    /* Chip discreto de WhatsApp del footer */
    .wa-chip {
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      text-decoration: none;
      font-weight: 700;
      font-size: 0.92rem;
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(0, 0, 0, 0.08);
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
      transition: transform 0.15s ease, box-shadow 0.15s ease;
    }

    .wa-chip:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
    }

    .wa-chip i {
      font-size: 1rem;
      color: #25d366;
    }

    /* Hacer más pequeño el control de música y que no tape el footer */
    .music-floating {
      padding: 8px 10px;
      /* antes 10px 14px */
      gap: 6px;
      /* antes 8px */
      bottom: 76px;
      /* lo subimos para despegar del footer */
      right: 16px;
    }

    .music-floating i {
      font-size: 1.1rem;
    }

    /* antes 1.25rem */
    .music-floating span {
      font-weight: 700;
    }

    /* En pantallas muy pequeñas: icono solo (más mini) */
    @media (max-width: 420px) {
      .music-floating {
        padding: 8px;
        bottom: 84px;
      }

      .music-floating span {
        display: none;
      }

      /* oculta el texto “Música/Pausar” */
    }

    /* (opcional) respeta usuarios con “reducir animaciones” */
    @media (prefers-reduced-motion: reduce) {
      .flip-inner {
        transition: none;
      }
    }

    @keyframes fall {
      to {
        transform: translateY(110vh) rotate(540deg);
      }
    }

    .pretty-rain {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 3;
    }

    .drop {
      position: absolute;
      will-change: transform;
      opacity: 0.9;
    }

    .drop.balloon {
      width: 18px;
      height: 24px;
      border-radius: 12px 12px 14px 14px;
      background: radial-gradient(circle at 30% 25%,
          rgba(255, 255, 255, 0.8),
          rgba(255, 255, 255, 0) 40%),
        var(--col);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    }

    .drop.balloon::after {
      content: "";
      position: absolute;
      left: 50%;
      bottom: -8px;
      width: 2px;
      height: 10px;
      background: rgba(255, 255, 255, 0.85);
      transform: translateX(-50%);
    }

    /* Tarjetas con zoom suave al hover/touch */
    /* Tarjetas con POP al hover/touch */
    .fx-card {
      display: block;
      border-radius: 1rem;
      transform-origin: center;
      transition: transform 0.35s cubic-bezier(0.2, 0.8, 0.2, 1),
        box-shadow 0.35s ease, filter 0.35s ease;
      will-change: transform;
      backface-visibility: hidden;
    }

    .fx-card:hover,
    .fx-card:focus-visible,
    .fx-card.is-hover {
      /* <- clase que activaremos en touch */
      transform: scale(1.06) translateY(-6px);
      box-shadow: 0 18px 38px rgba(0, 0, 0, 0.22),
        0 6px 16px rgba(0, 0, 0, 0.1);
      filter: saturate(1.06) contrast(1.04);
    }

    .fx-card:active {
      transform: scale(1.02) translateY(-2px);
    }

    /* Animación al entrar en pantalla */
    .reveal-up {
      opacity: 0;
      transform: translateY(14px) scale(0.98);
      transition: opacity 0.6s ease,
        transform 0.6s cubic-bezier(0.22, 0.7, 0.22, 1);
    }

    .reveal-up.in {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    /* Reduce motion para accesibilidad */
    @media (prefers-reduced-motion: reduce) {

      .fx-card,
      .reveal-up {
        transition: none !important;
        transform: none !important;
      }
    }

    @keyframes floatDown {
      to {
        transform: translate3d(var(--dx, 0), 110vh, 0) rotate(var(--rot, 0deg));
        opacity: 0.95;
      }
    }

    /* Música flotante */
    .music-floating {
      position: fixed;
      bottom: 18px;
      right: 18px;
      z-index: 9998;
      background: rgba(255, 255, 255, 0.92);
      border-radius: 999px;
      padding: 10px 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.25);
      cursor: pointer;
      user-select: none;
    }

    .music-floating i {
      font-size: 1.25rem;
      color: var(--k2);
    }

    .music-floating span {
      font-weight: 700;
    }

    /* Overlay escritorio */
    #desktopOverlay {
      display: none;
    }

    @media (min-width: 768px) {
      #desktopOverlay {
        position: fixed;
        inset: 0;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 28px;
        background: radial-gradient(900px 500px at 50% 10%,
            #201a3b 0%,
            #0f0f1b 45%,
            #0a0b11 100%);
        color: #fff;
      }

      #desktopOverlay .card {
        background: rgba(255, 255, 255, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.25);
        border-radius: 18px;
        padding: 24px;
        max-width: 680px;
      }

      #desktopOverlay h2 {
        font-family: Fredoka, Poppins, sans-serif;
        font-weight: 800;
      }

      #desktopOverlay p {
        opacity: 0.9;
      }
    }
  </style>
</head>

<body>
  <div id="desktopOverlay" aria-hidden="true">
    <div class="card">
      <h2 class="mb-2">Esta invitación es para ver en el celular 📱</h2>
      <p class="mb-3">
        Para que se vea con todos sus efectos K-Pop y se lea perfecto, ábrela
        desde tu teléfono. Si estás en la compu, escanéala con tu móvil o
        comparte el enlace. ✨
      </p>
      <div class="small opacity-75">¡Gracias por entender! 💖</div>
    </div>
  </div>

  <!-- Efectos -->
  <div class="confetti" id="confetti"></div>
  <div class="pretty-rain" id="prettyRain"></div>
  <div class="music-floating" id="musicControl">
    <i class="bi bi-play-fill" id="musicIcon"></i><span id="musicText">Música</span>
  </div>
  <audio id="bgMusic" preload="auto" loop>
    <!-- Ruta directa a tu mp3 dentro de /modelosTresAños/img/ -->
    <source id="bgMusicSource" src="./img/K-pop.mp3" type="audio/mpeg" />
  </audio>

  <!-- Portada -->
  <section class="cover text-center py-4" style="position: relative">
    <div class="container">
      <div class="flip-frame">
        <div class="flip-inner">
          <div class="flip-front">
            <img src="./img/10.png" alt="Foto principal de Iliana" />
          </div>
          <div class="flip-back">
            <img src="./img/11.png" alt="Segunda foto de Iliana" />
          </div>
        </div>
      </div>
      <h1 class="fw-bold" style="
            font-family: Fredoka;
            color: #fff;
            text-shadow: 0 6px 22px rgba(0, 0, 0, 0.4);
          ">
        ¡Te invito a mi fiesta! ✨
      </h1>
      <p class="mb-0 text-white-50">Es tiempo de festejar</p>
    </div>
  </section>

  <!-- Cinta -->
  <section class="py-3" style="
        background: linear-gradient(
          135deg,
          rgba(255, 79, 211, 0.18),
          rgba(64, 233, 255, 0.18)
        );
      ">
    <div class="container">
      <img class="w-100 rounded-4 shadow" src="./img/1.png" alt="Fondo K-Pop" />
    </div>
  </section>

  <!-- Encabezado principal -->
  <header class="hero">
    <div class="container">
      <div class="k-badge">
        <i class="bi bi-stars"></i> La guerrera está de fiesta y tú eres parte
        de la historia¡No faltes!
      </div>
      <h2 class="title" id="nombreTitulo">Cumple de Iliana</h2>
      <p class="subtitle mb-1">
        ¡Iliana cumple <span id="edadTxt2">4</span> años!
      </p>
      <p id="mensajeNina" class="mb-0 fw-semibold">
        Hola, Te invito a mi fiesta
      </p>
      <p class="small mb-0">
        Tematica: K-Pop • Colores brillantes y mucha música ✨
      </p>
    </div>
  </header>

  <main class="container py-4 py-md-5">
    <section class="glass info-card mx-auto p-4 p-md-5">
      <div class="row g-4 align-items-center">
        <div class="col-md-6">
          <div class="col-md-6">
            <div class="age-block">
              <div class="age-photo">
                <!-- 👇 pon aquí tu imagen -->
                <img src="./img/4años.png" alt="Foto decorativa" />
              </div>
              <div class="pill">
                <i class="bi bi-calendar-event me-2"></i>
                <span id="fechaTxt">8 de noviembre</span>
              </div>
              <div class="pill">
                <i class="bi bi-clock me-2"></i>
                <span id="horaTxt">14:00 hrs</span>
              </div>
            </div>
          </div>

          <div class="mt-3">
            <p class="mb-0">
              <i class="bi bi-info-circle-fill icon"></i>
              <span id="notaTxt">Tienes una invitación, a un lugar especial</span>
            </p>
            <p class="mb-2">
              <i class="bi bi-geo-alt-fill icon"></i><strong>Lugar: </strong><span id="lugarTxt">Salón K-Pop Party,
                Calle Melodía 123, Col. Centro, Mérida,
                Yucatán</span>
            </p>
          </div>
          <div class="d-flex gap-2 mt-4 flex-wrap">
            <a id="btnMaps" class="btn btn-k"><i class="bi bi-map me-1"></i>Abrir en Google Maps</a>
            <a id="btnDir" class="btn btn-outline-dark fw-semibold"><i class="bi bi-sign-turn-right me-1"></i>Cómo
              llegar</a>
            <a id="btnRsvp" class="btn btn-outline-dark fw-semibold disabled" aria-label="Pedir informes por WhatsApp">
              <i class="bi bi-whatsapp me-1"></i>Informes por WhatsApp
            </a>
          </div>
        </div>
        <div class="col-md-6">
          <div class="row g-3">
            <div class="col-12">
              <img class="w-100 rounded-4 shadow fx-card reveal-up" src="./img/1.png" alt="kpop1" />
            </div>
            <div class="col-6">
              <img class="w-100 rounded-4 shadow fx-card reveal-up" src="./img/8.png" alt="kpop2" />
            </div>
            <div class="col-6">
              <img class="w-100 rounded-4 shadow fx-card reveal-up" src="./img/12.png" alt="kpop3" />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Mapa en vivo -->
    <section id="liveMap" class="mx-auto mt-4" style="max-width: 980px">
      <div class="glass p-3 p-md-4">
        <h2 class="h4 fw-bold mb-3">
          <i class="bi bi-geo-alt me-1"></i> Ubicación
        </h2>
        <div class="ratio ratio-16x9 rounded-4 overflow-hidden">
          <iframe id="liveMapEmbed" src="" style="border: 0" allowfullscreen loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
      </div>
    </section>

    <!-- Cuenta regresiva -->
    <section id="countdown" class="mx-auto mt-4" style="max-width: 900px">
      <div class="glass p-3 p-md-4 text-center">
        <h2 class="h4 fw-bold mb-3">
          <i class="bi bi-hourglass-split me-1"></i> Cuenta regresiva
        </h2>
        <div class="d-flex justify-content-center gap-2 flex-wrap">
          <div class="pill px-3 py-2">
            <div id="cd-days" class="h2 fw-bold mb-0">00</div>
            <div class="label-chip">Días</div>
          </div>
          <div class="pill px-3 py-2">
            <div id="cd-hours" class="h2 fw-bold mb-0">00</div>
            <div class="label-chip">Horas</div>
          </div>
          <div class="pill px-3 py-2">
            <div id="cd-mins" class="h2 fw-bold mb-0">00</div>
            <div class="label-chip">Min</div>
          </div>
          <div class="pill px-3 py-2">
            <div id="cd-secs" class="h2 fw-bold mb-0">00</div>
            <div class="label-chip">Seg</div>
          </div>
        </div>
        <div class="small text-muted mt-2">
          ¡Nos vemos el <span id="fechaResumen">8 de noviembre</span> a las
          <span id="horaResumen">14:00</span>! 💫
        </div>
      </div>
    </section>

    <!-- Post-evento -->
    <section id="postEvent" class="mx-auto mt-4" style="max-width: 900px; display: none">
      <div class="glass p-3 p-md-4 text-center">
        <h2 class="h4 fw-bold mb-2">
          <i class="bi bi-balloon-heart me-1"></i> La fiesta ya concluyó
        </h2>
        <p class="mb-3">
          ¡Gracias por acompañarnos y hacer especial el cumple de Iliana! 💖
        </p>
        <div class="ratio ratio-16x9 rounded-4 overflow-hidden mb-3">
          <iframe id="postMapEmbed" src="" style="border: 0" allowfullscreen loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
        <div class="d-flex justify-content-center gap-2 flex-wrap">
          <a id="btnMapsPost" class="btn btn-k"><i class="bi bi-map me-1"></i>Abrir en Google Maps</a>
          <a id="btnDirPost" class="btn btn-outline-dark fw-semibold"><i class="bi bi-sign-turn-right me-1"></i>Cómo
            llegar</a>
        </div>
      </div>
    </section>
  </main>

  <footer class="container text-center py-4">
    <small class="d-block mb-2">
      © 2025 • Hecho por LAC — Invitaciones digitales
    </small>

    <!-- Chip discreto de WhatsApp -->
    <a href="https://wa.me/525534633490?text=Hola%20Lau%2C%20quiero%20mi%20invitaci%C3%B3n%20digital%20%F0%9F%93%A8"
      target="_blank" class="wa-chip" aria-label="Contactar por WhatsApp para hacer mi invitación">
      <i class="bi bi-whatsapp me-1"></i> Pide la tuya
    </a>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    /* ========= CONFIG (sin editor visual) ========= */
    const CONFIG = {
      nombre: "Iliana",
      coords: { lat: 19.4901695, lng: -99.2264938 },
      edad: 4,
      fechaTxt: "8 de noviembre",
      horaTxt: "14:00 hrs",
      lugar: "Naucalpan de Juárez, Estado de México, México",
      mapsUrl:
        "https://www.google.com/maps/place/19%C2%B029'24.6%22N+99%C2%B013'35.4%22W/@19.4901695,-99.2290687,17z/data=!3m1!4b1!4m4!3m3!8m2!3d19.4901695!4d-99.2264938?hl=es&entry=ttu&g_ep=EgoyMDI1MTAwMS4wIKXMDSoASAFQAw%3D%3D",
      whatsapp: "525547078385",
      musicUrl: "./img/K-pop.mp3",
      volume: 20, // 0–100 (limitado a 30%)
      nota: "Tienes una invitación, a un lugar especial",
      mensaje: "Hola, Te invito a mi fiesta",
      // 8 nov 2025, 14:00
      target: new Date(2025, 10, 8, 14, 0),
    };

    /* ===== Helpers seguros (no rompen si falta el elemento) ===== */
    const $ = (id) => document.getElementById(id);
    const setText = (id, txt) => {
      const el = $(id);
      if (el) el.textContent = txt;
    };
    const setAttr = (el, obj) => {
      if (!el) return;
      Object.entries(obj).forEach(([k, v]) => el.setAttribute(k, v));
    };

    /* ========= Render base ========= */
    function renderStatic() {
      setText("nombreTitulo", "Cumple de " + CONFIG.nombre);
      // Estas dos pueden NO existir en tu HTML; por eso no deben romper:
      setText("edadTxt", CONFIG.edad);
      setText("edadTxt2", CONFIG.edad);
      setText("fechaTxt", CONFIG.fechaTxt);
      setText("horaTxt", CONFIG.horaTxt);
      setText("fechaResumen", CONFIG.fechaTxt);
      setText(
        "horaResumen",
        CONFIG.horaTxt.replace(" hrs", "").replace("hrs", "")
      );
      setText("lugarTxt", CONFIG.lugar || "—");
      setText("mensajeNina", CONFIG.mensaje);
      // Puede no existir:
      setText("notaTxt", CONFIG.nota);

      // ----- Google Maps (embed + enlaces) -----
      const hasCoords =
        CONFIG.coords &&
        typeof CONFIG.coords.lat === "number" &&
        typeof CONFIG.coords.lng === "number";
      const place = (CONFIG.lugar || "").trim();

      const q = hasCoords
        ? `${CONFIG.coords.lat},${CONFIG.coords.lng}`
        : encodeURIComponent(
          place || "Naucalpan de Juárez, Estado de México"
        );

      const mapsSearch = hasCoords
        ? `https://maps.google.com/?q=${q}&z=17`
        : `https://maps.google.com/?q=${q}`;
      const mapsDir = `https://www.google.com/maps/dir/?api=1&destination=${q}`;
      const mapsEmbed = `https://www.google.com/maps?q=${q}&z=17&output=embed`;

      const liveMap = $("liveMapEmbed");
      if (liveMap) liveMap.src = mapsEmbed;

      const postMap = $("postMapEmbed");
      if (postMap) postMap.src = mapsEmbed;

      const btnMaps = $("btnMaps");
      const btnDir = $("btnDir");
      if (btnMaps) {
        btnMaps.href = mapsSearch;
        setAttr(btnMaps, { target: "_blank", rel: "noopener" });
      }
      if (btnDir) {
        btnDir.href = mapsDir;
        setAttr(btnDir, { target: "_blank", rel: "noopener" });
      }

      const btnMapsPost = $("btnMapsPost");
      const btnDirPost = $("btnDirPost");
      if (btnMapsPost) {
        btnMapsPost.href = mapsSearch;
        setAttr(btnMapsPost, { target: "_blank", rel: "noopener" });
      }
      if (btnDirPost) {
        btnDirPost.href = mapsDir;
        setAttr(btnDirPost, { target: "_blank", rel: "noopener" });
      }

      // ----- WhatsApp (informes) -----
      const btnRsvp = $("btnRsvp");
      if (btnRsvp) {
        if (CONFIG.whatsapp) {
          const numero = CONFIG.whatsapp.replace(/\D/g, "");
          const msg = `Hola, ¿me puedes dar informes o cómo llegar al evento de ${CONFIG.nombre}?`;
          btnRsvp.href =
            "https://wa.me/" + numero + "?text=" + encodeURIComponent(msg);
          setAttr(btnRsvp, { target: "_blank" });
          btnRsvp.classList.remove("disabled");
          btnRsvp.setAttribute(
            "aria-label",
            "Abrir chat de WhatsApp para pedir informes"
          );
        } else {
          btnRsvp.href = "#";
          btnRsvp.removeAttribute("target");
          btnRsvp.classList.add("disabled");
        }
      }
    }

    // ----- Confetti -----
    const confettiEl = $("confetti");
    const colors = [
      "#ffffff",
      "#ffe1fb",
      "#d8d8ff",
      "#c4fbff",
      "#ffd3e8",
      "#e7e2ff",
    ];
    function makeSpark() {
      if (!confettiEl) return;
      const s = document.createElement("div");
      s.className = "spark";
      s.style.left = Math.random() * 100 + "vw";
      s.style.top = "-10vh";
      s.style.background = colors[Math.floor(Math.random() * colors.length)];
      s.style.transform =
        "translateY(0) rotate(" + Math.random() * 180 + "deg)";
      s.style.animationDuration = 3 + Math.random() * 3 + "s";
      confettiEl.appendChild(s);
      setTimeout(() => s.remove(), 6500);
    }
    setInterval(makeSpark, 180);

    // ----- Globitos -----
    const pretty = $("prettyRain");
    const pastel = [
      "#ffe1fb",
      "#e5e4ff",
      "#dff8ff",
      "#ffd8e8",
      "#e7f7ff",
      "#fff",
    ];
    function spawnDrop() {
      if (!pretty) return;
      const d = document.createElement("div");
      d.className = "drop " + (Math.random() < 0.6 ? "balloon" : "");
      d.style.left = Math.random() * 100 + "vw";
      d.style.top = "-10vh";
      if (d.classList.contains("balloon")) {
        d.style.setProperty(
          "--col",
          pastel[Math.floor(Math.random() * pastel.length)]
        );
      }
      d.style.setProperty("--dx", Math.random() * 20 - 10 + "vw");
      d.style.setProperty("--rot", Math.random() * 120 - 60 + "deg");
      d.style.animation = "floatDown " + (6 + Math.random() * 4) + "s linear forwards";

      pretty.appendChild(d);
      setTimeout(() => d.remove(), 10000);
    }
    setInterval(spawnDrop, 320);

    // ----- Cuenta regresiva -----
    function setCdValue(id, v) {
      const el = $(id);
      if (el) el.textContent = String(v).padStart(2, "0");
    }
    function tick() {
      const now = new Date();
      let diff = CONFIG.target.getTime() - now.getTime();
      const passed = diff <= 0;
      if (passed) diff = 0;

      const days = Math.floor(diff / 86400000);
      const hours = Math.floor((diff % 86400000) / 3600000);
      const mins = Math.floor((diff % 3600000) / 60000);
      const secs = Math.floor((diff % 60000) / 1000);

      setCdValue("cd-days", days);
      setCdValue("cd-hours", hours);
      setCdValue("cd-mins", mins);
      setCdValue("cd-secs", secs);

      if (passed) {
        const countdownEl = $("countdown");
        const postEl = $("postEvent");
        if (countdownEl) countdownEl.style.display = "none";
        if (postEl) {
          postEl.style.display = "block";
          const h2 = postEl.querySelector("h2");
          const p = postEl.querySelector("p");
          if (h2)
            h2.innerHTML =
              '<i class="bi bi-balloon-heart me-1"></i> La invitación expiró';
          if (p) p.textContent = "¡Gracias por asistir a mi fiesta! 💖";
        }
      }
    }

    // ----- Música -----
    const audio = $("bgMusic");
    const musicCtrl = $("musicControl");
    const musicIcon = $("musicIcon");
    const musicText = $("musicText");

    function applyMusic() {
      if (!audio || !musicCtrl || !musicIcon || !musicText) return;
      const url = (CONFIG.musicUrl || "").trim();
      if (!url) {
        musicCtrl.style.display = "none";
        return;
      }
      // Resuelve ruta relativa según dónde esté el HTML
      const resolved = new URL(url, location.href).href;

      // Aplica ruta al <audio>
      const srcEl = $("bgMusicSource");
      if (srcEl) srcEl.src = resolved;
      audio.src = resolved;
      audio.load();

      // Volumen (máx 0.3 por autoplay)
      const vol =
        Math.max(0, Math.min(100, Number(CONFIG.volume || 20))) / 100;
      audio.volume = Math.min(vol, 0.3);

      audio.addEventListener(
        "error",
        () => {
          console.error(
            "Error cargando audio:",
            audio.error,
            "URL:",
            resolved
          );
        },
        { once: true }
      );
    }
    /* Reveal al entrar en pantalla con pequeño “stagger” */
    (function initRevealUp() {
      const items = Array.from(document.querySelectorAll(".reveal-up"));
      if (!items.length || !("IntersectionObserver" in window)) {
        // Si no hay soporte, muéstralas sin animación
        items.forEach((el) => el.classList.add("in"));
        return;
      }
      const io = new IntersectionObserver(
        (entries) => {
          entries.forEach((e) => {
            if (e.isIntersecting) {
              // pequeño retraso escalonado según su posición en la lista
              const idx = items.indexOf(e.target);
              e.target.style.transitionDelay = (idx % 3) * 80 + "ms";
              e.target.classList.add("in");
              io.unobserve(e.target);
            }
          });
        },
        { threshold: 0.15 }
      );

      items.forEach((el) => io.observe(el));
    })();

    function toggleMusic() {
      if (!audio || !musicIcon || !musicText) return;
      if (audio.paused) {
        audio
          .play()
          .then(() => {
            musicIcon.classList.replace("bi-play-fill", "bi-pause-fill");
            musicText.textContent = "Pausar";
          })
          .catch(() => { });
      } else {
        audio.pause();
        musicIcon.classList.replace("bi-pause-fill", "bi-play-fill");
        musicText.textContent = "Música";
      }
    }

    if (musicCtrl) {
      musicCtrl.addEventListener("click", (e) => {
        e.stopPropagation();
        toggleMusic();
      });
    }
    /* --- Auto-flip cada 7s con pausa por interacción --- */
    let flipTimer = null;
    const flipEl = document.querySelector(".flip-inner");

    function startAutoFlip() {
      if (!flipEl) return;
      stopAutoFlip(); // evita timers duplicados
      flipTimer = setInterval(() => {
        flipEl.classList.toggle("is-flipped");
      }, 7000); // 7 segundos
    }

    function stopAutoFlip() {
      if (flipTimer) {
        clearInterval(flipTimer);
        flipTimer = null;
      }
    }

    // Pausa auto-flip si el usuario interactúa; reanuda al salir
    if (flipEl) {
      flipEl.addEventListener("mouseenter", stopAutoFlip);
      flipEl.addEventListener("mouseleave", startAutoFlip);
      // En móviles: tocar alterna y también pausa 2s para no pelear con el auto
      flipEl.addEventListener(
        "touchstart",
        () => {
          flipEl.classList.toggle("is-flipped");
          stopAutoFlip();
          setTimeout(startAutoFlip, 2000);
        },
        { passive: true }
      );
    }

    // Requerido por navegadores móviles: reproducir tras primer toque
    document.addEventListener(
      "pointerdown",
      function once() {
        if (audio && CONFIG.musicUrl) {
          audio
            .play()
            .then(() => {
              if (musicIcon && musicText) {
                musicIcon.classList.replace("bi-play-fill", "bi-pause-fill");
                musicText.textContent = "Pausar";
              }
            })
            .catch(() => { });
        }
        document.removeEventListener("pointerdown", once);
      },
      { once: true }
    );
    /* Hover táctil para .fx-card (móviles) */
    (function addTouchHover(selector = ".fx-card") {
      const els = Array.from(document.querySelectorAll(selector));
      if (!els.length) return;

      els.forEach((el) => {
        let touchTimer = null;

        el.addEventListener(
          "touchstart",
          () => {
            el.classList.add("is-hover");
            // si mantiene el dedo, que siga “pop”; si fue tap rápido, se quita al final
          },
          { passive: true }
        );

        el.addEventListener("touchend", () => {
          // quita el “pop” un poquito después para que se note
          clearTimeout(touchTimer);
          touchTimer = setTimeout(() => el.classList.remove("is-hover"), 150);
        });

        el.addEventListener("touchcancel", () => {
          el.classList.remove("is-hover");
        });
      });
    })();

    // ===== Init (en orden) =====
    renderStatic(); // ← ya no truena si faltan ids
    applyMusic();
    startAutoFlip();
    tick();
    setInterval(tick, 1000);
  </script>
</body>

</html>
